<div class="flex flex-wrap mt-4">
    <div class="w-full mb-12 px-4">
      <div
      class="relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded bg-white"
      >
          <div class="rounded-t bg-white mb-0 px-6 py-6">
              <div class="text-center flex justify-between">
              <h3 class="font-semibold text-lg text-blueGray-700">Les réparations non payées en totalité</h3>
              </div>
          </div>
          <div *ngIf="unpaidReparations$ | async as array" class="block w-full overflow-x-auto">
            <!-- Projects table -->
            
    
            <table class="items-center w-full bg-transparent border-collapse">
              <thead>
                <tr >
                    <th
                     class="px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                     >
                     </th>
                     <th
                     class="px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                     >
                     Client</th>
                     <th
                     class="px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                     >
                     Immatriculation</th>
                     <th
                     class="px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                     >
                     Dépôt</th>
                     <th
                     class="px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                     >
                     Montant</th>
                     <th
                     class="px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                     >
                     Payé</th>
                     <th
                     class="px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                     >
                     Reste
                     </th>
                     <th
                     class="px-6 align-middle border border-solid py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                     >
                     </th>
                </tr>
              </thead>
              <tbody >
                    <tr *ngFor="let rep of array | paginate:{itemsPerPage: 4, currentPage: page} " >
                        <th 
                            class="px-6 align-middle border border-solid py-3 text-xs  border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                            >
                            <img *ngIf="!rep.repair.voiture.imageUrl"
                            src="assets/img/2017_hyundai_santa_fe.jpg"
                            class="h-12 w-12 bg-white rounded-full border"
                            alt="image voiture" style="object-fit: cover"
                          />
                          <img *ngIf="rep.repair.voiture.imageUrl"
                            src="{{rep.repair.voiture.imageUrl}}"
                            class="h-12 w-12 bg-white rounded-full border"
                            alt="image voiture" style="object-fit: cover"
                          />
                        </th>
                        <td 
                        class="px-6 align-middle border border-solid py-3 text-xs  border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                        >
                        {{rep.repair.voiture.client.name}}
                        </td>
                        <td 
                        class="px-6 align-middle border border-solid py-3 text-xs  border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                        >
                        {{rep.repair.voiture.immatriculation}}
                        </td>
                        <td 
                        class="px-6 align-middle border border-solid py-3 text-xs  border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                        >
                        {{rep.repair.dateDepot | date}}
                        </td>
                        <td 
                        class="px-6 align-middle border border-solid py-3 text-xs  border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                        >
                        {{rep.montantTotal | currency:'AR'}}
                        </td>
                        
                        <td 
                        class="px-6 align-middle border border-solid py-3 text-xs  border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                        >
                        {{rep.totalPaid | currency:'AR'}}
                        </td>
                        <td 
                        class="px-6 align-middle border border-solid py-3 text-xs  border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                        >
                        {{rep.restToPay | currency:'AR'}}
                        <td 
                        class="px-6 align-middle border border-solid py-3 text-xs  border-l-0 border-r-0 whitespace-nowrap font-semibold text-left bg-blueGray-50 text-blueGray-500 border-blueGray-100"
                        >
                        <a [routerLink]="['/finance/factures-non-payees/',rep.repair._id]"
                            class="bg-emerald-500 text-white active:bg-emerald-600 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150" 
                        >
                            Voir
                        </a>
                        
                        </td>
                    </tr>
              </tbody>
            </table>
            <div *ngIf="array.length > 1" class="flex flex-wrap">
              <div class="w-full lg:w-4/12 px-4"></div>
              <div class="w-full lg:w-4/12 px-4">
                <div class=" block has-text-centered">
                    <pagination-template class="my-pagination" #p="paginationApi" (pageChange)="page = $event">
                      <div class="custom-pagination flex pl-0 m-4 rounded list-none flex-wrap">
                        <div class="chevron pagination-previous" [class.isDisabled]="p.isFirstPage()">
                            <a 
                              class="first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-red-500 bg-white text-red-500"                          
                               (click)="p.previous()"> 
                              <i class="fas fa-chevron-left -ml-px"></i> 
                            </a>
                          </div>
                
                        <div *ngFor="let page of p.pages" [class.current]="p.getCurrent() === page.value">
                            <a 
                            class="first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-red-500 bg-white text-red-500"                          
                            (click)="p.setCurrent(page.value)"
                            *ngIf="p.getCurrent() !== page.value">
                              <span>{{ page.label }}</span>
                            </a>
                            <div 
                            class="first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-red-500 text-white bg-red-500"                         
                             *ngIf="p.getCurrent() === page.value">
                                <span>{{ page.label }}</span>
                            </div>
                        </div>
                
                        <div class="chevron pagination-next" [class.isDisabled]="p.isLastPage()">
                            <a 
                            class="first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-red-500 bg-white text-red-500"          
                            
                            (click)="p.next()"> 
                            <i class="fas fa-chevron-right -mr-px"></i>
                           </a>
                        </div>
                    </div>
                    </pagination-template>
                </div>
              </div>
              <div class="w-full lg:w-4/12 px-4"></div>
          </div>
          </div>
          
        </div>
        
    </div>
    
  </div>